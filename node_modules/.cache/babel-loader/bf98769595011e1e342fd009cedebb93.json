{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"C:\\\\Users\\\\youno\\\\tweetle\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\n\nvar _objectSpread = require(\"C:\\\\Users\\\\youno\\\\tweetle\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/objectSpread\");\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\youno\\\\tweetle\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\youno\\\\tweetle\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OAuth1Helper = void 0;\n\nvar crypto = __importStar(require(\"crypto\"));\n\nvar OAuth1Helper = /*#__PURE__*/function () {\n  function OAuth1Helper(options) {\n    _classCallCheck(this, OAuth1Helper);\n\n    this.nonceLength = 32;\n    this.consumerKeys = options.consumerKeys;\n  }\n\n  _createClass(OAuth1Helper, [{\n    key: \"hash\",\n    value: function hash(base, key) {\n      return crypto.createHmac('sha1', key).update(base).digest('base64');\n    }\n  }, {\n    key: \"authorize\",\n    value: function authorize(request) {\n      var accessTokens = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var oauthInfo = {\n        oauth_consumer_key: this.consumerKeys.key,\n        oauth_nonce: this.getNonce(),\n        oauth_signature_method: 'HMAC-SHA1',\n        oauth_timestamp: this.getTimestamp(),\n        oauth_version: '1.0'\n      };\n\n      if (accessTokens.key !== undefined) {\n        oauthInfo.oauth_token = accessTokens.key;\n      }\n\n      if (!request.data) {\n        request.data = {};\n      }\n\n      oauthInfo.oauth_signature = this.getSignature(request, accessTokens.secret, oauthInfo);\n      return oauthInfo;\n    }\n  }, {\n    key: \"toHeader\",\n    value: function toHeader(oauthInfo) {\n      var sorted = sortObject(oauthInfo);\n      var header_value = 'OAuth ';\n\n      var _iterator = _createForOfIteratorHelper(sorted),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var element = _step.value;\n\n          if (element.key.indexOf('oauth_') !== 0) {\n            continue;\n          }\n\n          header_value += OAuth1Helper.percentEncode(element.key) + '=\"' + OAuth1Helper.percentEncode(element.value) + '\",';\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {\n        // Remove the last ,\n        Authorization: header_value.slice(0, header_value.length - 1)\n      };\n    }\n  }, {\n    key: \"getNonce\",\n    value: function getNonce() {\n      var wordCharacters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n      var result = '';\n\n      for (var i = 0; i < this.nonceLength; i++) {\n        result += wordCharacters[Math.trunc(Math.random() * wordCharacters.length)];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getTimestamp\",\n    value: function getTimestamp() {\n      return Math.trunc(new Date().getTime() / 1000);\n    }\n  }, {\n    key: \"getSignature\",\n    value: function getSignature(request, tokenSecret, oauthInfo) {\n      return this.hash(this.getBaseString(request, oauthInfo), this.getSigningKey(tokenSecret));\n    }\n  }, {\n    key: \"getSigningKey\",\n    value: function getSigningKey(tokenSecret) {\n      return OAuth1Helper.percentEncode(this.consumerKeys.secret) + '&' + OAuth1Helper.percentEncode(tokenSecret || '');\n    }\n  }, {\n    key: \"getBaseString\",\n    value: function getBaseString(request, oauthInfo) {\n      return request.method.toUpperCase() + '&' + OAuth1Helper.percentEncode(this.getBaseUrl(request.url)) + '&' + OAuth1Helper.percentEncode(this.getParameterString(request, oauthInfo));\n    }\n  }, {\n    key: \"getParameterString\",\n    value: function getParameterString(request, oauthInfo) {\n      var baseStringData = sortObject(percentEncodeData(mergeObject(oauthInfo, mergeObject(request.data, deParamUrl(request.url)))));\n      var dataStr = '';\n\n      var _iterator2 = _createForOfIteratorHelper(baseStringData),\n          _step2;\n\n      try {\n        var _loop = function _loop() {\n          var _step2$value = _step2.value,\n              key = _step2$value.key,\n              value = _step2$value.value;\n\n          // check if the value is an array\n          // this means that this key has multiple values\n          if (value && Array.isArray(value)) {\n            // sort the array first\n            value.sort();\n            var valString = ''; // serialize all values for this key: e.g. formkey=formvalue1&formkey=formvalue2\n\n            value.forEach(function (item, i) {\n              valString += key + '=' + item;\n\n              if (i < value.length) {\n                valString += '&';\n              }\n            });\n            dataStr += valString;\n          } else {\n            dataStr += key + '=' + value + '&';\n          }\n        };\n\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          _loop();\n        } // Remove the last character\n\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return dataStr.slice(0, dataStr.length - 1);\n    }\n  }, {\n    key: \"getBaseUrl\",\n    value: function getBaseUrl(url) {\n      return url.split('?')[0];\n    }\n  }], [{\n    key: \"percentEncode\",\n    value: function percentEncode(str) {\n      return encodeURIComponent(str).replace(/!/g, '%21').replace(/\\*/g, '%2A').replace(/'/g, '%27').replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n    }\n  }]);\n\n  return OAuth1Helper;\n}();\n\nexports.OAuth1Helper = OAuth1Helper;\nexports.default = OAuth1Helper; // Helper functions //\n\nfunction mergeObject(obj1, obj2) {\n  return _objectSpread({}, obj1 || {}, obj2 || {});\n}\n\nfunction sortObject(data) {\n  return Object.keys(data).sort().map(function (key) {\n    return {\n      key: key,\n      value: data[key]\n    };\n  });\n}\n\nfunction deParam(string) {\n  var splitted = string.split('&');\n  var data = {};\n\n  var _iterator3 = _createForOfIteratorHelper(splitted),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var coupleKeyValue = _step3.value;\n\n      var _coupleKeyValue$split = coupleKeyValue.split('='),\n          _coupleKeyValue$split2 = _slicedToArray(_coupleKeyValue$split, 2),\n          key = _coupleKeyValue$split2[0],\n          _coupleKeyValue$split3 = _coupleKeyValue$split2[1],\n          value = _coupleKeyValue$split3 === void 0 ? '' : _coupleKeyValue$split3; // check if the key already exists\n      // this can occur if the QS part of the url contains duplicate keys like this: ?formkey=formvalue1&formkey=formvalue2\n\n\n      if (data[key]) {\n        // the key exists already\n        if (!Array.isArray(data[key])) {\n          // replace the value with an array containing the already present value\n          data[key] = [data[key]];\n        } // and add the new found value to it\n\n\n        data[key].push(decodeURIComponent(value));\n      } else {\n        // it doesn't exist, just put the found value in the data object\n        data[key] = decodeURIComponent(value);\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  return data;\n}\n\nfunction deParamUrl(url) {\n  var tmp = url.split('?');\n  if (tmp.length === 1) return {};\n  return deParam(tmp[1]);\n}\n\nfunction percentEncodeData(data) {\n  var result = {};\n\n  for (var key in data) {\n    var value = data[key]; // check if the value is an array\n\n    if (value && Array.isArray(value)) {\n      value = value.map(function (v) {\n        return OAuth1Helper.percentEncode(v);\n      });\n    } else {\n      value = OAuth1Helper.percentEncode(value);\n    }\n\n    result[OAuth1Helper.percentEncode(key)] = value;\n  }\n\n  return result;\n}","map":null,"metadata":{},"sourceType":"script"}